<!DOCTYPE html>
<html>
<head>
	<title>maps</title>
	<link rel="stylesheet" type="text/css" href="css/semantic.min.css">
	<link rel="stylesheet" type="text/css" href="css/style.css">
	<link rel="stylesheet" type="text/css" href="css/ol.css">
</head>
<body>
	<div class="ui top fixed menu text-center">
		<h1 class=""> Карти </h1>
	</div>

	<div class="ui grid divided my-sidebar padded">
		<div class="five wide column">
			<div class="ui fluid search selection dropdown" id="search-dropdown">
			  <input type="hidden" name="country" id="search-container">
			  <i class="dropdown icon"></i>
			  <div class="default text">Виберіть місто</div>
			  <div class="menu" id="search-result">
<!-- 			<div class="item" data-value="Ternopil">Тернопіль</div>
			  	<div class="item" data-value="Buchach">Бучач</div> -->
			  </div>
			 </div>
		</div>
		<div class="eleven wide column" id="map">
		</div>
	</div>

	<script src="https://code.jquery.com/jquery-3.1.1.min.js"
  integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8="
  crossorigin="anonymous"></script>
	<script type="text/javascript" src="js/semantic.min.js"></script>
	<script type="text/javascript" src="js/ol.js"></script>

	<script type="text/javascript" src="js/main.js"></script>
	<script src="js/search.js"></script>

	<script>
	  var view =  new ol.View({
		    center: [0, 0],
		    zoom: 2
	    });

	  var map = new ol.Map({
	    layers: [
	      new ol.layer.Tile({source: new ol.source.OSM()})
	    ],
	    loadTilesWhileAnimating: true,
	    view: view,
	    target: 'map'
	  });


      function flyTo(location) {
        var duration = 2000;
        var zoom = view.getZoom();
        var parts = 2;
        var called = false;
        function callback(complete) {
          --parts;
          if (called) {
            return;
          }
          if (parts === 0 || !complete) {
            called = true;
            // done(complete);
          }
        }
        view.animate({
          center: location,
          duration: duration
        }, callback);
        view.animate({
          zoom: zoom - 1,
          duration: duration / 2
        }, {
          zoom: zoom,
          duration: duration / 2
        }, callback);
      }


	  $('#search-dropdown').dropdown('setting', 'onChange', function(e) {
	  	 var selectedName = $('.selection.dropdown').dropdown('get value');
	  	 var elem = $('#search-dropdown .item[data-value="'+selectedName+'"]');
	  	 
	  	 var lon = elem.data('lon');
	  	 var lat = elem.data('lat');
console.log(lon,  lat);
    	 let pos = ol.proj.fromLonLat([37.6178, 55.7517]);
    	        view.animate({
          center: pos,
          duration: 400
        });
   	 	map.getView().setZoom(10);

	 });

	</script>
</body>
</html>